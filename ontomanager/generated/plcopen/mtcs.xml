<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://www.plcopen.org/xml/tc6_0200">
  <fileHeader companyName="Institute of Astronomy" productName="OntoManager" productVersion="0.0.1" creationDateTime="2017-02-03T02:13:47.113946" />
  <contentHeader name="mtcs" modificationDateTime="2017-02-03T02:13:47.113946">
    <coordinateInfo>
      <fbd>
        <scaling x="1" y="1" />
      </fbd>
      <ld>
        <scaling x="1" y="1" />
      </ld>
      <sfc>
        <scaling x="1" y="1" />
      </sfc>
    </coordinateInfo>
    <addData>
      <data name="http://www.3s-software.com/plcopenxml/projectinformation" handleUnknown="implementation">
        <ProjectInformation />
      </data>
    </addData>
  </contentHeader>
  <types>
    <dataTypes>
      <dataType name="MTCSParts">
        <baseType>
          <struct>
            <variable name="telemetry">
              <type><derived name="Telemetry" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The telemetry</xhtml>
              </documentation>
            </variable>
            <variable name="cover">
              <type><derived name="Cover" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The Cover of the telescope</xhtml>
              </documentation>
            </variable>
            <variable name="m1">
              <type><derived name="M1" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The primary mirror of the telescope</xhtml>
              </documentation>
            </variable>
            <variable name="m2">
              <type><derived name="M2" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The secondary mirror of the telescope</xhtml>
              </documentation>
            </variable>
            <variable name="m3">
              <type><derived name="M3" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The tertiary mirror of the telescope</xhtml>
              </documentation>
            </variable>
            <variable name="services">
              <type><derived name="Services" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The Services system</xhtml>
              </documentation>
            </variable>
            <variable name="safety">
              <type><derived name="Safety" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The safety</xhtml>
              </documentation>
            </variable>
            <variable name="hydraulics">
              <type><derived name="Hydraulics" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The hydraulics</xhtml>
              </documentation>
            </variable>
            <variable name="axes">
              <type><derived name="Axes" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The axes</xhtml>
              </documentation>
            </variable>
            <variable name="configManager">
              <type><derived name="ConfigManager" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">The config manager (to load/save/activate configuration data)</xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
      </dataType>
      <dataType name="MTCSProcesses">
        <baseType>
          <struct>
            <variable name="initialize">
              <type><derived name="Process" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Start initializing the whole MTCS</xhtml>
              </documentation>
            </variable>
            <variable name="lock">
              <type><derived name="Process" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Lock the whole MTCS</xhtml>
              </documentation>
            </variable>
            <variable name="unlock">
              <type><derived name="Process" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Unlock the whole MTCS</xhtml>
              </documentation>
            </variable>
            <variable name="changeOperator">
              <type><derived name="ChangeOperatorStateProcess" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Change the operator (e.g. OBSERVER, TECH, ...)</xhtml>
              </documentation>
            </variable>
            <variable name="verifyPassword">
              <type><derived name="ChangeOperatorStateProcess" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Only verify the operator password</xhtml>
              </documentation>
            </variable>
            <variable name="reboot">
              <type><derived name="Process" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Reboot the whole MTCS</xhtml>
              </documentation>
            </variable>
            <variable name="shutdown">
              <type><derived name="Process" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Shutdown the whole MTCS</xhtml>
              </documentation>
            </variable>
            <variable name="wakeUp">
              <type><derived name="Process" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Wake up the whole MTCS</xhtml>
              </documentation>
            </variable>
            <variable name="goToSleep">
              <type><derived name="Process" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Let the whole MTCS go to sleep</xhtml>
              </documentation>
            </variable>
            <variable name="changeInstrument">
              <type><derived name="MTCSChangeInstrumentProcess" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Change the instrument</xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
      </dataType>
      <dataType name="MTCSStatuses">
        <baseType>
          <struct>
            <variable name="initializationStatus">
              <type><derived name="InitializationStatus" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
              </documentation>
            </variable>
            <variable name="healthStatus">
              <type><derived name="HealthStatus" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
              </documentation>
            </variable>
            <variable name="busyStatus">
              <type><derived name="BusyStatus" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
              </documentation>
            </variable>
            <variable name="operatorStatus">
              <type><derived name="OperatorStatus" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
              </documentation>
            </variable>
            <variable name="passwordHealthStatus">
              <type><derived name="HealthStatus" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
              </documentation>
            </variable>
            <variable name="activityStatus">
              <type><derived name="ActivityStatus" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
      </dataType>
      <dataType name="MTCSInstrumentsConfig">
        <baseType>
          <struct>
            <variable name="instrument0">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 0</xhtml>
              </documentation>
            </variable>
            <variable name="instrument1">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 1</xhtml>
              </documentation>
            </variable>
            <variable name="instrument2">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 2</xhtml>
              </documentation>
            </variable>
            <variable name="instrument3">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 3</xhtml>
              </documentation>
            </variable>
            <variable name="instrument4">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 4</xhtml>
              </documentation>
            </variable>
            <variable name="instrument5">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 5</xhtml>
              </documentation>
            </variable>
            <variable name="instrument6">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 6</xhtml>
              </documentation>
            </variable>
            <variable name="instrument7">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 7</xhtml>
              </documentation>
            </variable>
            <variable name="instrument8">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 8</xhtml>
              </documentation>
            </variable>
            <variable name="instrument9">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Instrument 9</xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
      </dataType>
      <dataType name="MTCSConfig">
        <baseType>
          <struct>
            <variable name="instruments">
              <type><derived name="MTCSInstrumentsConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Configure the instruments</xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
      </dataType>
      <dataType name="MTCSChangeInstrumentProcessArgs">
        <baseType>
          <struct>
            <variable name="name">
              <type><string /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Name of the instrument</xhtml>
              </documentation>
            </variable>
          </struct>
        </baseType>
      </dataType>
    </dataTypes>
    <pous>
      <pou name="SM_MTCS" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="editableConfig">
              <type><derived name="MTCSConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                    <Attribute Name="OPC.UA.DA.Access" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Editable configuration of the MTCS</xhtml>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="actualStatus">
              <type><string /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                    <Attribute Name="OPC.UA.DA.Access" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Current status description</xhtml>
              </documentation>
            </variable>
            <variable name="previousStatus">
              <type><string /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Previous status description</xhtml>
              </documentation>
            </variable>
            <variable name="noOfFailedOperatorChanges">
              <type><UINT /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                    <Attribute Name="OPC.UA.DA.Access" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">How many times has a wrong password been entered?</xhtml>
              </documentation>
            </variable>
            <variable name="activeInstrument">
              <type><derived name="InstrumentConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                    <Attribute Name="OPC.UA.DA.Access" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Config of the currently active instrument (depending on M3 and possibly derotator) *if* isInstrumentActive is TRUE</xhtml>
              </documentation>
            </variable>
            <variable name="activeInstrumentNumber">
              <type><INT /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                    <Attribute Name="OPC.UA.DA.Access" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Number of the currently active instrument (0..9, or -1 if no instrument is active)</xhtml>
              </documentation>
            </variable>
            <variable name="activeInstrumentName">
              <type><string /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                    <Attribute Name="OPC.UA.DA.Access" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Name of the currently active instrument</xhtml>
              </documentation>
            </variable>
            <variable name="isInstrumentActive">
              <type><BOOL /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                    <Attribute Name="OPC.UA.DA.Access" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Is an instrument currently active (i.e. is M3 static at a known position?)</xhtml>
              </documentation>
            </variable>
            <variable name="config">
              <type><derived name="MTCSConfig" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                    <Attribute Name="OPC.UA.DA.Access" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Active configuration of the ServicesTiming subsystem</xhtml>
              </documentation>
            </variable>
            <variable name="statuses">
              <type><derived name="MTCSStatuses" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Statuses of the state machine</xhtml>
              </documentation>
            </variable>
            <variable name="parts">
              <type><derived name="MTCSParts" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Parts of the state machine</xhtml>
              </documentation>
            </variable>
            <variable name="processes">
              <type><derived name="MTCSProcesses" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Processes of the state machine</xhtml>
              </documentation>
            </variable>
          </outputVars>
          <inOutVars>
          </inOutVars>
          <localVars>
          </localVars>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">parts.telemetry( operatorStatus := statuses.operatorStatus );
parts.cover( operatorStatus := statuses.operatorStatus );
parts.m1(
    operatorStatus := statuses.operatorStatus,
    tubeAngleMeasurement := parts.telemetry.parts.accelerometers.tube);
parts.m2(
    operatorStatus := statuses.operatorStatus,
    io := parts.m1.parts.io,
    actualFocalStation := parts.m3.actualKnownPositionID,
    m3KnownPositionsConfig := parts.m3.config.knownPositions,
    temperatures := parts.telemetry.parts.temperatures);
parts.m3( operatorStatus := statuses.operatorStatus );
parts.services( operatorStatus := statuses.operatorStatus );
parts.safety(
    operatorStatus := statuses.operatorStatus,
    activityStatus := statuses.activityStatus);
parts.hydraulics(
    operatorStatus := statuses.operatorStatus,
    safetyHydraulics := parts.safety.parts.hydraulics,
    safetyIO := parts.safety.parts.io);
parts.configManager( isEnabled := statuses.operatorStatus.tech );
statuses.initializationStatus();
statuses.healthStatus(
    isGood := parts.axes.statuses.healthStatus.isGood AND (parts.cover.statuses.healthStatus.isGood AND (parts.m1.statuses.healthStatus.isGood AND (parts.m2.statuses.healthStatus.isGood AND (parts.m3.statuses.healthStatus.isGood AND (parts.services.statuses.healthStatus.isGood AND (parts.telemetry.statuses.healthStatus.isGood AND (parts.safety.statuses.healthStatus.isGood AND parts.hydraulics.statuses.healthStatus.isGood))))))),
    hasWarning := parts.axes.statuses.healthStatus.hasWarning OR (parts.cover.statuses.healthStatus.hasWarning OR (parts.m1.statuses.healthStatus.hasWarning OR (parts.m2.statuses.healthStatus.hasWarning OR (parts.m3.statuses.healthStatus.hasWarning OR (parts.services.statuses.healthStatus.hasWarning OR (parts.telemetry.statuses.healthStatus.hasWarning OR (parts.safety.statuses.healthStatus.hasWarning OR parts.hydraulics.statuses.healthStatus.hasWarning))))))));
statuses.busyStatus( isBusy := parts.axes.statuses.busyStatus.busy OR (parts.cover.statuses.busyStatus.busy OR (parts.m1.statuses.busyStatus.busy OR (parts.m2.statuses.busyStatus.busy OR (parts.m3.statuses.busyStatus.busy OR (parts.services.statuses.busyStatus.busy OR (parts.telemetry.statuses.busyStatus.busy OR (parts.safety.statuses.busyStatus.busy OR parts.hydraulics.statuses.busyStatus.busy))))))) );
statuses.operatorStatus();
statuses.passwordHealthStatus( superState := statuses.operatorStatus.observer );
statuses.activityStatus(
    superState := statuses.initializationStatus.initialized OR statuses.initializationStatus.initializingFailed,
    isAwake := (parts.hydraulics.pumpsState = HydraulicsPumpsStates.RUNNING) OR parts.axes.statuses.poweredStatus.enabled,
    isMoving := parts.axes.statuses.busyStatus.busy OR parts.axes.isTracking);
processes.initialize( isEnabled := NOT(statuses.initializationStatus.initializing) );
processes.lock( isEnabled := statuses.operatorStatus.tech AND statuses.initializationStatus.initialized );
processes.unlock( isEnabled := statuses.operatorStatus.tech AND statuses.initializationStatus.locked );
processes.changeOperator( isEnabled := TRUE );
processes.verifyPassword( isEnabled := TRUE );
processes.reboot( isEnabled := TRUE );
processes.shutdown( isEnabled := statuses.operatorStatus.tech );
processes.wakeUp( isEnabled := statuses.activityStatus.sleeping );
processes.goToSleep( isEnabled := statuses.activityStatus.awake OR statuses.healthStatus.bad );
processes.changeInstrument( isEnabled := statuses.initializationStatus.initialized OR statuses.healthStatus.bad );
</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="initialize">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">initialize := THIS^.processes.initialize.request();
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="lock">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">lock := THIS^.processes.lock.request();
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="unlock">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">unlock := THIS^.processes.unlock.request();
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="changeOperator">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                  <variable name="state">
                    <type><derived name="OperatorStates" /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
                    </documentation>
                  </variable>
                  <variable name="password">
                    <type><string /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
                    </documentation>
                  </variable>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">changeOperator := THIS^.processes.changeOperator.request(
    state := state,
    password := password);
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="verifyPassword">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                  <variable name="state">
                    <type><derived name="OperatorStates" /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
                    </documentation>
                  </variable>
                  <variable name="password">
                    <type><string /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
                    </documentation>
                  </variable>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">verifyPassword := THIS^.processes.verifyPassword.request(
    state := state,
    password := password);
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="reboot">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">reboot := THIS^.processes.reboot.request();
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="shutdown">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">shutdown := THIS^.processes.shutdown.request();
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="wakeUp">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">wakeUp := THIS^.processes.wakeUp.request();
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="goToSleep">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">goToSleep := THIS^.processes.goToSleep.request();
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="changeInstrument">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                  <variable name="name">
                    <type><string /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml"></xhtml>
                    </documentation>
                  </variable>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">changeInstrument := THIS^.processes.changeInstrument.request( name := name );
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="_log">
              <interface>
                <returnType><BOOL /></returnType>
                <inputVars>
                  <variable name="name">
                    <type><string /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml">Name of this function block instance</xhtml>
                    </documentation>
                  </variable>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                  <variable name="buffer">
                    <type><derived name="LogBuffer" /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml">Buffer to write all logging to</xhtml>
                    </documentation>
                  </variable>
                </inOutVars>
                <localVars>
                  <variable name="subBuffer">
                    <type><derived name="LogBuffer" /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml">Temporary buffer to write logging by parts (sub-statemachines) to</xhtml>
                    </documentation>
                  </variable>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.parts.telemetry._log(
    name := &#39;telemetry&#39;,
    buffer := subBuffer);
THIS^.parts.cover._log(
    name := &#39;cover&#39;,
    buffer := subBuffer);
THIS^.parts.m1._log(
    name := &#39;m1&#39;,
    buffer := subBuffer);
THIS^.parts.m2._log(
    name := &#39;m2&#39;,
    buffer := subBuffer);
THIS^.parts.m3._log(
    name := &#39;m3&#39;,
    buffer := subBuffer);
THIS^.parts.services._log(
    name := &#39;services&#39;,
    buffer := subBuffer);
THIS^.parts.safety._log(
    name := &#39;safety&#39;,
    buffer := subBuffer);
THIS^.parts.hydraulics._log(
    name := &#39;hydraulics&#39;,
    buffer := subBuffer);
THIS^.parts.axes._log(
    name := &#39;axes&#39;,
    buffer := subBuffer);
THIS^.parts.configManager._log(
    name := &#39;configManager&#39;,
    buffer := subBuffer);
LOGGER(
    name := name,
    actualStatus := THIS^.actualStatus,
    previousStatus := THIS^.previousStatus,
    buffer := buffer,
    subBuffer := subBuffer,
    pHealthStatus := ADR(THIS^.statuses.healthStatus),
    pBusyStatus := ADR(THIS^.statuses.busyStatus));
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
        </addData>
      </pou>
      <pou name="MTCSChangeInstrumentProcess" pouType="functionBlock">
        <interface>
          <inputVars>
            <variable name="set">
              <type><derived name="MTCSChangeInstrumentProcessArgs" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Arguments to be set, before writing do_request TRUE</xhtml>
              </documentation>
            </variable>
          </inputVars>
          <outputVars>
            <variable name="get">
              <type><derived name="MTCSChangeInstrumentProcessArgs" /></type>
              <addData>
                <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                  <Attributes>
                    <Attribute Name="OPC.UA.DA" Value="1" />
                    <Attribute Name="OPC.UA.DA.Access" Value="1" />
                  </Attributes>
                </data>
              </addData>
              <documentation>
                <xhtml xmlns="http://www.w3.org/1999/xhtml">Arguments in use by the process, if do_request was accepted</xhtml>
              </documentation>
            </variable>
          </outputVars>
          <inOutVars>
          </inOutVars>
          <localVars>
          </localVars>
          <addData>
            <data name="http://www.3s-software.com/plcopenxml/pouinheritance" handleUnknown="implementation">
              <Inheritance>
                <Extends>BaseProcess</Extends>
              </Inheritance>
            </data>
          </addData>
        </interface>
        <body>
          <ST>
            <xhtml xmlns="http://www.w3.org/1999/xhtml">IF do_request THEN
    do_request_result := request( name := set.name );
    do_request := FALSE;
END_IF;
SUPER^();
</xhtml>
          </ST>
        </body>
        <addData>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="start">
              <interface>
                <inputVars>
                  <variable name="name">
                    <type><string /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml">Name of the instrument</xhtml>
                    </documentation>
                  </variable>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">THIS^.get.name := name;
THIS^.statuses.busyStatus( isBusy := TRUE );
THIS^.statuses.healthStatus( isGood := TRUE );
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
          <data name="http://www.3s-software.com/plcopenxml/method" handleUnknown="implementation">
            <Method name="request">
              <interface>
                <returnType><derived name="RequestResults" /></returnType>
                <inputVars>
                  <variable name="name">
                    <type><string /></type>
                    <addData>
                      <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                        <Attributes>
                        </Attributes>
                      </data>
                    </addData>
                    <documentation>
                      <xhtml xmlns="http://www.w3.org/1999/xhtml">Name of the instrument</xhtml>
                    </documentation>
                  </variable>
                </inputVars>
                <outputVars>
                </outputVars>
                <inOutVars>
                </inOutVars>
                <localVars>
                </localVars>
                <addData>
                  <data name="http://www.3s-software.com/plcopenxml/attributes" handleUnknown="implementation">
                    <Attributes>
                      <Attribute Name="TcRpcEnable" Value="1" />
                    </Attributes>
                  </data>
                </addData>
              </interface>
              <body>
                <ST>
                  <xhtml xmlns="http://www.w3.org/1999/xhtml">IF THIS^.statuses.enabledStatus.enabled THEN
    THIS^.start( name := name );
    request := RequestResults.ACCEPTED;
ELSE
    request := RequestResults.REJECTED;
END_IF;
</xhtml>
                </ST>
              </body>
            </Method>
          </data>
        </addData>
      </pou>
    </pous>
  </types>
  <instances>
    <configurations />
  </instances>
  <addData>
    <data name="http://www.3s-software.com/plcopenxml/projectstructure" handleUnknown="discard">
      <ProjectStructure>
        <Folder Name="mtcs">
          <Folder Name="Enums">
          </Folder>
          <Folder Name="Statuses">
          </Folder>
          <Folder Name="StateMachines">
            <Folder Name="Parts">
              <Object Name="MTCSParts">
              </Object>
            </Folder>
            <Folder Name="Processes">
              <Object Name="MTCSProcesses">
              </Object>
            </Folder>
            <Folder Name="Statuses">
              <Object Name="MTCSStatuses">
              </Object>
            </Folder>
            <Object Name="SM_MTCS">
              <Object Name="initialize" />
              <Object Name="lock" />
              <Object Name="unlock" />
              <Object Name="changeOperator" />
              <Object Name="verifyPassword" />
              <Object Name="reboot" />
              <Object Name="shutdown" />
              <Object Name="wakeUp" />
              <Object Name="goToSleep" />
              <Object Name="changeInstrument" />
              <Object Name="_log" />
            </Object>
          </Folder>
          <Folder Name="Configs">
            <Object Name="MTCSInstrumentsConfig">
            </Object>
            <Object Name="MTCSConfig">
            </Object>
          </Folder>
          <Folder Name="Structs">
          </Folder>
          <Folder Name="Processes">
            <Folder Name="Args">
              <Object Name="MTCSChangeInstrumentProcessArgs">
              </Object>
            </Folder>
            <Object Name="MTCSChangeInstrumentProcess">
              <Object Name="start" />
              <Object Name="request" />
            </Object>
          </Folder>
        </Folder>
      </ProjectStructure>
    </data>
  </addData>
</project>